(this["webpackJsonpfront-end-review"]=this["webpackJsonpfront-end-review"]||[]).push([[0],{1:function(e,t,n){var a=n(38);t.fetchAllArticles=function(e){return a.get("https://keir-back-end-nc-news.herokuapp.com/api/articles",{params:{sort_by:e}}).then((function(e){return e.data}))},t.fetchSingleArticle=function(e){return a.get("https://keir-back-end-nc-news.herokuapp.com/api/articles/".concat(e)).then((function(e){return e.data}))},t.fetchAllTopics=function(){return a.get("https://keir-back-end-nc-news.herokuapp.com/api/topics").then((function(e){return e.data}))},t.fetchArticlesForTopic=function(e){return a.get("https://keir-back-end-nc-news.herokuapp.com/api/articles?topic=".concat(e)).then((function(e){return e.data}))},t.fetchCommentsForArticle=function(e){return a.get("https://keir-back-end-nc-news.herokuapp.com/api/articles/".concat(e,"/comments")).then((function(e){return e.data}))},t.patchArticleVotes=function(e,t){return a.patch("https://keir-back-end-nc-news.herokuapp.com/api/articles/".concat(e),{inc_votes:t})},t.patchCommentsVotes=function(e,t){return a.patch("https://keir-back-end-nc-news.herokuapp.com/api/comments/".concat(e),{inc_votes:t}).then((function(){}))},t.postCommentToArticle=function(e,t){return a.post("https://keir-back-end-nc-news.herokuapp.com/api/articles/".concat(t,"/comments"),e).then((function(e){return e.data}))},t.deleteCommentForArticle=function(e){return a.delete("https://keir-back-end-nc-news.herokuapp.com/api/comments/".concat(e)).then(console.log("deleted"))}},25:function(e,t,n){e.exports=n(56)},30:function(e,t,n){},31:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(22),i=n.n(r),o=(n(30),n(2)),l=n(3),s=n(5),u=n(4),m=n(6),p=(n(31),n(8)),h=function(){return c.a.createElement("h1",{className:"title"},"NC News")},d=n(9),f=n(10),E=n(1),v=function(e){var t,n=e.err;n&&(t=n.response.data.msg);return c.a.createElement("section",null,c.a.createElement("h3",null,t||"Error, something went wrong"))},b=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={optimisticVotes:0},n.handleClick=function(e){n.setState((function(t){return{optimisticVotes:t.optimisticVotes+e}})),E.patchArticleVotes(n.props.article_id,e).catch((function(t){alert("Voting is Down"),n.setState((function(t){return{optimisticVotes:t.optimisticVotes-e}}))}))},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.err?c.a.createElement(v,null):c.a.createElement("div",null,c.a.createElement("p",null,"Votes: ",this.props.votes+this.state.optimisticVotes),c.a.createElement("button",{onClick:function(t){e.handleClick(1)},disabled:this.state.optimisticVotes>0},"Like Article"),c.a.createElement("button",{onClick:function(t){e.handleClick(-1)},disabled:this.state.optimisticVotes<0},"Dislike Article"))}}]),t}(a.Component),k=function(){return c.a.createElement("div",null,"Loading...")},g=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={articles:[],input:"",err:null,isLoading:!0},n.articlesInvoker=function(){E.fetchAllArticles().then((function(e){var t=e.articles;n.setState({articles:t,isLoading:!1})})).catch((function(e){var t=e.err;n.setState({err:t,isLoading:!1})}))},n.handleSubmit=function(e){e.preventDefault(),E.fetchAllArticles(n.state.input).then((function(e){var t=e.articles;n.setState((function(e){return Object(f.a)({articles:t},e.articles)}))}))},n.handleClick=function(e){var t=e.target,a=t.id,c=t.value;n.setState((function(e){return Object(d.a)({currentState:e},a,c)}))},n.componentDidMount=function(){n.articlesInvoker()},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.isLoading?c.a.createElement(k,null):this.state.err?c.a.createElement(v,null):c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("select",{id:"input",className:"select",onChange:this.handleClick},c.a.createElement("option",{value:"none"},"Select an Option"),c.a.createElement("option",{value:"created_at"},"Date"),c.a.createElement("option",{value:"comment_count"},"Comment count"),c.a.createElement("option",{value:"votes"},"Votes")),c.a.createElement("button",{className:"button"},"Sort By")),this.state.articles.map((function(e){return c.a.createElement("section",{className:"articles",id:e.article_id,key:e.article_id},c.a.createElement("h3",null,c.a.createElement(p.a,{to:"/articles/".concat(e.article_id)},e.title)),c.a.createElement("p",null,"Article_id:",e.article_id),c.a.createElement("p",null,e.body),c.a.createElement("p",null,"Comments on article: ",e.comment_count),c.a.createElement("p",null,"Topic: ",e.topic),c.a.createElement("p",null,"created at: ",e.created_at),c.a.createElement(b,{article_id:e.article_id,votes:e.votes}))})))}}]),t}(a.Component),j=function(){return c.a.createElement("nav",null,c.a.createElement("p",null,c.a.createElement(p.a,{to:"/articles"},"Articles")),c.a.createElement("p",null,c.a.createElement(p.a,{to:"/topics"},"Topics")))},O=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={topics:[],isLoading:!0,err:null},n.topicsInvoker=function(){E.fetchAllTopics().then((function(e){var t=e.topics;n.setState({topics:t,isLoading:!1})})).catch((function(e){n.setState({err:e})}))},n.componentDidMount=function(){n.topicsInvoker()},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.isLoading?c.a.createElement(k,null):this.state.err?c.a.createElement(v,null):c.a.createElement("div",null,this.state.topics.map((function(e){return c.a.createElement("section",{key:e.slug},c.a.createElement("h3",null,c.a.createElement(p.a,{to:"/topics/".concat(e.slug)},e.slug)))})))}}]),t}(a.Component),C=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={article:[],isLoading:!0,err:null},n.singleArticleInvoker=function(){E.fetchSingleArticle(n.props.article_id).then((function(e){var t=e.article;n.setState({article:t,isLoading:!1},(function(){}))})).catch((function(e){n.setState({err:e,isLoading:!1})}))},n.componentDidMount=function(){n.singleArticleInvoker()},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(this.state.isLoading)return c.a.createElement(k,null);if(this.state.err)return c.a.createElement(v,{err:this.state.err});var e=this.state.article,t=e.title,n=e.body,a=e.votes,r=e.topic,i=e.article_id;return c.a.createElement("div",{id:i},c.a.createElement("h3",null,t),c.a.createElement("p",null,n),c.a.createElement("p",null,"Topic: ",r),c.a.createElement("p",null,c.a.createElement(p.a,{to:"/articles/".concat(i,"/comments")},"Comments")),c.a.createElement(b,{article_id:i,votes:a}))}}]),t}(a.Component),y=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={articles:[],isLoading:!0,err:null},n.singleTopicInvoker=function(){E.fetchArticlesForTopic(n.props.slug,n.props.article_id).then((function(e){var t=e.articles;n.setState({articles:t,isLoading:!1})})).catch((function(e){n.setState({err:e,isLoading:!1})}))},n.handleSubmit=function(e){e.preventDefault(),E.fetchAllArticles(n.state.input).then((function(e){var t=e.articles;n.setState((function(e){return Object(f.a)({articles:t},e.articles)}))}))},n.handleClick=function(e){var t=e.target,a=t.id,c=t.value;n.setState((function(e){return Object(d.a)({currentState:e},a,c)}))},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.singleTopicInvoker()}},{key:"render",value:function(){return this.state.isLoading?c.a.createElement(k,null):this.state.err?c.a.createElement(v,null):c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("select",{id:"input",className:"select",onChange:this.handleClick},c.a.createElement("option",{value:"none"},"Select an Option"),c.a.createElement("option",{value:"created_at"},"Date"),c.a.createElement("option",{value:"comment_count"},"Comment count"),c.a.createElement("option",{value:"votes"},"Votes")),c.a.createElement("button",{className:"button"},"Sort By")),this.state.articles.map((function(e){return c.a.createElement("section",{key:e.article_id},c.a.createElement("h3",null,c.a.createElement(p.a,{to:"/articles/".concat(e.article_id)},e.title)),c.a.createElement("p",null,"Article_id:",e.article_id),c.a.createElement("p",null,e.body),c.a.createElement("p",null,"Votes: ",e.votes),c.a.createElement("p",null,"Number of comments on article: ",e.comment_count),c.a.createElement("p",null,"Topic: ",e.topic),c.a.createElement(b,{article_id:e.article_id,votes:e.votes}))})))}}]),t}(a.Component),_=n(24),A=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={optimisticVotes:0},n.handleClick=function(e){n.setState((function(t){return{optimisticVotes:t.optimisticVotes+e}})),E.patchCommentsVotes(n.props.comment_id,e).catch((function(t){alert("Voting is Down"),n.setState((function(t){return{optimisticVotes:t.optimisticVotes-e}}))}))},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.err?c.a.createElement(v,null):c.a.createElement("div",null,c.a.createElement("p",null,"Likes: ",this.props.votes+this.state.optimisticVotes),c.a.createElement("button",{className:"commentLikeButton",onClick:function(){e.handleClick(1)},disabled:this.state.optimisticVotes>0},"Like Comment"),c.a.createElement("button",{className:"commentDislikeButton",onClick:function(){e.handleClick(-1)},disabled:this.state.optimisticVotes<0},"Dislike Comment"))}}]),t}(a.Component),S=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={body:""},n.handleChange=function(e,t){n.setState(Object(d.a)({},t,e))},n.handleSubmit=function(e){n.props.user?(e.preventDefault(),n.setState({body:""}),E.postCommentToArticle(Object(f.a)({},n.state,{username:n.props.user}),n.props.article_id).then((function(e){n.props.addComment(e.comment)})).catch((function(e){n.setState({err:!0})}))):alert("You must be logged in to post a comment!")},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.err?c.a.createElement(v,null):c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("label",null,"Comment Here:",c.a.createElement("input",{className:"commentInput",onChange:function(t){e.handleChange(t.target.value,"body")},type:"text",id:"body",value:this.state.body,required:!0}),c.a.createElement("button",{className:"button"},"Add Comment"))))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={comments:[],isLoading:!0,err:!1},n.addComment=function(e){n.setState((function(t){return{comments:[e].concat(Object(_.a)(t.comments))}}))},n.handleDelete=function(e){var t=e.target.parentElement.id;E.deleteCommentForArticle(t).then((function(){n.setState((function(e){return{comments:e.comments.filter((function(e){return e.comment_id!==+t}))}}))})).catch((function(e){alert("Unable to delete at the current time! Try refreshing the page"),n.setState({err:e})}))},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"commentInvoker",value:function(){var e=this;E.fetchCommentsForArticle(this.props.article_id).then((function(t){var n=t.comments;e.setState({comments:n,isLoading:!1},(function(){}))})).catch((function(t){e.setState({err:t,isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.commentInvoker()}},{key:"render",value:function(){var e=this;return this.state.isLoading?c.a.createElement(k,null):this.state.err?c.a.createElement(v,{err:this.state.err}):c.a.createElement("div",null,c.a.createElement(S,{comments:this.state.comments,addComment:this.addComment,article_id:this.props.article_id,user:this.props.user}),this.state.comments.map((function(t){return c.a.createElement("section",{id:t.comment_id,key:t.comment_id},c.a.createElement("h4",null,t.author," commented:"),c.a.createElement("p",null,t.body),c.a.createElement("p",null,"Article_id: ",t.article_id),c.a.createElement("p",null,"Votes: ",t.votes),c.a.createElement("p",null,"comment posted at: ",t.created_at),c.a.createElement("p",null,"Comment_id: ",t.comment_id),c.a.createElement(A,{className:"votes",comment_id:t.comment_id,votes:t.votes}),e.props.user===t.author&&c.a.createElement("button",{className:"deleteButton",onClick:e.handleDelete},"Delete Comment"))})))}}]),t}(a.Component),V=function(){return c.a.createElement("h2",{id:"home"},"Welcome to NC News!")},L=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={user:"jessjelly"},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(h,null),"Logged in as: ",this.state.user,c.a.createElement(j,null),c.a.createElement(p.b,null,c.a.createElement(V,{path:"/"}),c.a.createElement(g,{path:"/articles"}),c.a.createElement(C,{path:"/articles/:article_id"}),c.a.createElement(O,{path:"/topics"}),c.a.createElement(y,{path:"/topics/:slug"}),c.a.createElement(w,{path:"/articles/:article_id/comments",user:this.state.user}),c.a.createElement(v,{default:!0,path:"/*"})))}}]),t}(a.Component);i.a.render(c.a.createElement(L,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.455352a4.chunk.js.map